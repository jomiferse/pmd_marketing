---
import "../styles/global.css";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import {
  DEFAULT_DESCRIPTION,
  DEFAULT_KEYWORDS,
  DEFAULT_OG_IMAGE,
  SITE_NAME,
  resolveUrl
} from "../lib/site";

const {
  title,
  description = DEFAULT_DESCRIPTION,
  path = "/",
  keywords = DEFAULT_KEYWORDS,
  image = DEFAULT_OG_IMAGE,
  noIndex = false
} = Astro.props;

const pageTitle = title ? `${title} | ${SITE_NAME}` : SITE_NAME;
const canonicalUrl = resolveUrl(path);
const imageUrl = resolveUrl(image);
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{pageTitle}</title>
    <meta name="description" content={description} />
    <meta name="keywords" content={Array.isArray(keywords) ? keywords.join(", ") : keywords} />
    <link rel="canonical" href={canonicalUrl} />
    <meta name="theme-color" content="#eef2f6" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <meta property="og:type" content="website" />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:site_name" content={SITE_NAME} />
    <meta property="og:image" content={imageUrl} />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={pageTitle} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={imageUrl} />

    <link rel="icon" href="/favicons/favicon-16x16.png" sizes="16x16" type="image/png" />
    <link rel="icon" href="/favicons/favicon-32x32.png" sizes="32x32" type="image/png" />
    <link rel="shortcut icon" href="/favicons/favicon.ico" />
    <link rel="apple-touch-icon" href="/favicons/apple-touch-icon.png" sizes="180x180" />
    <link
      rel="icon"
      href="/favicons/android-chrome-192x192.png"
      sizes="192x192"
      type="image/png"
    />
    <link
      rel="icon"
      href="/favicons/android-chrome-512x512.png"
      sizes="512x512"
      type="image/png"
    />
    <link rel="manifest" href="/favicons/site.webmanifest" />
    <meta name="msapplication-config" content="/favicons/browserconfig.xml" />
    <meta name="msapplication-TileColor" content="#eef2f6" />

    {noIndex && <meta name="robots" content="noindex, nofollow" />}
    <slot name="head" />
  </head>
  <body class="bg-fog text-ink">
    <div class="flex min-h-screen flex-col">
      <Header />
      <main class="mx-auto w-full max-w-6xl flex-1 px-4 pb-16 pt-10 sm:px-6">
        <slot />
      </main>
      <Footer />
    </div>
  </body>
</html>
