---
import Button from "./Button.astro";
import Card from "./Card.astro";
import { APP_URL } from "../lib/site";
import { plans } from "../data/plans";

const featuredPlanId = "pro";
---

<div class="grid gap-6 lg:grid-cols-3">
  {plans.map((plan) => (
    <Card class={`flex h-full flex-col ${plan.id === featuredPlanId ? "border border-accent/70" : ""}`}>
      <div class="space-y-3">
        <div class="flex items-center justify-between">
          <p class="text-xs uppercase tracking-[0.2em] text-slate">{plan.name}</p>
          {plan.id === featuredPlanId && (
            <span class="rounded-full bg-accent/30 px-3 py-1 text-[10px] uppercase tracking-[0.2em] text-ink">
              Most popular
            </span>
          )}
        </div>
        <p class="text-3xl font-semibold text-ink">{plan.price}</p>
        <p class="text-sm text-slate">{plan.description}</p>
      </div>
      <ul class="mt-6 space-y-3 text-sm text-slate">
        <li>Digest window: {plan.entitlements.digestWindow}</li>
        <li>Themes per digest: {plan.entitlements.maxThemes}</li>
        <li>Strengths: {plan.entitlements.strengths}</li>
        <li>Copilot: {plan.entitlements.copilot}</li>
        <li>FAST mode: {plan.entitlements.fastMode}</li>
      </ul>
      <div class="mt-8">
        <Button
          href={`${APP_URL}/register?plan=${plan.id}`}
          variant={plan.id === featuredPlanId ? "primary" : "secondary"}
        >
          {plan.cta}
        </Button>
      </div>
    </Card>
  ))}
</div>
